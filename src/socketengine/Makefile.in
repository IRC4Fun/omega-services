CC		= @CC@
RM		= @RM@
CFLAGS		= @CFLAGS@
PICFLAGS	= @PICFLAGS@
LDFLAGS		= @LDFLAGS@
LIBS		= @LIBS@
INCLUDES	= -I../../include -I../../../include
CPPFLAGS	= ${INCLUDES} @CPPFLAGS@ 

INSTALL		    = @INSTALL@
INSTALL_DATA	= @INSTALL_DATA@

socketenginedir	= @moduledir@/socketengine

SRCS 	= select.c

SH_OBJS	= ${SRCS:.c=.so}
S_OBJS	= ${SRCS:.c=.o}

default: build
build: $(SH_OBJS)

.SUFFIXES: .sl .so .o

install: install-mkdirs
	@for file in $(SH_OBJS); do \
		$(INSTALL_DATA) $$file $(DESTDIR)$(socketenginedir); \
	done

install-mkdirs:
	-@if test ! -d $(DESTDIR)$(socketenginedir); then \
		mkdir $(DESTDIR)$(socketenginedir); \
	fi

.c.so:
	@echo "[CC] SocketEngine: $@"
	@${CC} ${PICFLAGS} ${CPPFLAGS} ${LDFLAGS} ${CFLAGS} $< -o $@ ${LIBS}

clean:
	@${RM} -f *.so *.sl *.o *~ *.a

distclean: clean
	@${RM} -f Makefile

